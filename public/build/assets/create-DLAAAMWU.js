import{c as de,r as w,j as t,a as fe,H as pe}from"./app-DaSBwjd3.js";import{G as he}from"./GCurrentLocationMarker-DXi_MtSR.js";import{G as xe,a as ue}from"./GPlotPolygon-Bc1RWYxQ.js";import{G as ge}from"./GPlotMarker-GS9tN990.js";import{B as ne}from"./app-logo-icon-CiuGZB-X.js";import{C as be,a as je,b as ye,c as Ne,d as _e}from"./card-CWe1S6TP.js";import{I as re}from"./input-Bm7_Kin8.js";import{L as te}from"./label-Dm7C1Wil.js";import{u as ve}from"./use-geolocation-BnkWiBnS.js";import{M as Se,A as Ce}from"./app-layout-C2qF2AQb.js";import{L as we}from"./loader-circle-D1hqZTOM.js";import{R as ke}from"./rotate-ccw-DjEGMyT9.js";import{S as Pe}from"./save-e4WrKEvD.js";/* empty css            */import"./index-MogoZHjD.js";import"./index-uAKuWc2X.js";import"./index-C4J_hXM0.js";const Ge=[{title:"Dashboard",href:"/dashboard"},{title:"Land Plots Gmap",href:"/land-plots-gmap"},{title:"Create",href:"/land-plots-gmap/create"}];function Ue(){const e=de.c(77),[l,oe]=w.useState(""),[c,ie]=w.useState("");let k;e[0]===Symbol.for("react.memo_cache_sentinel")?(k=[],e[0]=k):k=e[0];const[s,J]=w.useState(k),[se,K]=w.useState(!1);let P;e[1]===Symbol.for("react.memo_cache_sentinel")?(P={},e[1]=P):P=e[1];const[n,le]=w.useState(P),{latitude:r,longitude:o,accuracy:Q,loading:m}=ve();let G;e[2]!==r||e[3]!==o?(G=()=>r&&o?{lat:r,lng:o}:{lat:-6.2088,lng:106.8456},e[2]=r,e[3]=o,e[4]=G):G=e[4];const U=G;let L;e[5]!==s?(L=(a,i)=>{s.length<4&&J([...s,{lat:a,lng:i}])},e[5]=s,e[6]=L):L=e[6];const V=L;let M;e[7]!==s?(M=(a,i)=>{const ae=[...s];ae[a]=i,J(ae)},e[7]=s,e[8]=M):M=e[8];const W=M;let D;e[9]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{J([])},e[9]=D):D=e[9];const ce=D;let E;e[10]!==s||e[11]!==c||e[12]!==l?(E=a=>{a.preventDefault(),K(!0),le({}),fe.post("/land-plots",{name:l,description:c,boundary_points:s},{onError:i=>{le(i),K(!1)},onSuccess:()=>K(!1)})},e[10]=s,e[11]=c,e[12]=l,e[13]=E):E=e[13];const X=E;let R;e[14]!==s.length||e[15]!==l?(R=l.trim()!==""&&s.length===4,e[14]=s.length,e[15]=l,e[16]=R):R=e[16];const me=R;let F;e[17]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx(pe,{title:"Create Land Plot - Google Maps"}),e[17]=F):F=e[17];let B;e[18]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsxs(be,{children:[t.jsx(je,{children:"Create New Plot"}),t.jsx(ye,{children:"Click on the map to define 4 boundary points."})]}),e[18]=B):B=e[18];let H;e[19]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(te,{htmlFor:"name",children:"Plot Name *"}),e[19]=H):H=e[19];let I;e[20]===Symbol.for("react.memo_cache_sentinel")?(I=a=>oe(a.target.value),e[20]=I):I=e[20];let d;e[21]!==l?(d=t.jsx(re,{id:"name",value:l,onChange:I,placeholder:"e.g., North Field",required:!0}),e[21]=l,e[22]=d):d=e[22];let f;e[23]!==n.name?(f=n.name&&t.jsx("p",{className:"text-sm text-destructive",children:n.name}),e[23]=n.name,e[24]=f):f=e[24];let p;e[25]!==d||e[26]!==f?(p=t.jsxs("div",{className:"space-y-2",children:[H,d,f]}),e[25]=d,e[26]=f,e[27]=p):p=e[27];let A;e[28]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(te,{htmlFor:"description",children:"Description"}),e[28]=A):A=e[28];let $;e[29]===Symbol.for("react.memo_cache_sentinel")?($=a=>ie(a.target.value),e[29]=$):$=e[29];let h;e[30]!==c?(h=t.jsxs("div",{className:"space-y-2",children:[A,t.jsx(re,{id:"description",value:c,onChange:$,placeholder:"Optional description"})]}),e[30]=c,e[31]=h):h=e[31];let q;e[32]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(te,{children:"Boundary Points"}),e[32]=q):q=e[32];let x;e[33]!==s.length?(x=t.jsxs("div",{className:"flex items-center justify-between",children:[q,t.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.length,"/4"]})]}),e[33]=s.length,e[34]=x):x=e[34];let u;e[35]!==s?(u=t.jsx("div",{className:"rounded-lg border bg-muted/50 p-3",children:s.length===0?t.jsxs("p",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(Se,{className:"h-4 w-4"}),"Click on the map to add points"]}):t.jsx("div",{className:"space-y-2",children:s.map(Le)})}),e[35]=s,e[36]=u):u=e[36];let g;e[37]!==n.boundary_points?(g=n.boundary_points&&t.jsx("p",{className:"text-sm text-destructive",children:n.boundary_points}),e[37]=n.boundary_points,e[38]=g):g=e[38];let b;e[39]!==x||e[40]!==u||e[41]!==g?(b=t.jsxs("div",{className:"space-y-2",children:[x,u,g]}),e[39]=x,e[40]=u,e[41]=g,e[42]=b):b=e[42];const Y=s.length===0;let z;e[43]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(ke,{className:"mr-1 h-4 w-4"}),e[43]=z):z=e[43];let j;e[44]!==Y?(j=t.jsxs(ne,{type:"button",variant:"outline",onClick:ce,disabled:Y,className:"flex-1",children:[z,"Reset"]}),e[44]=Y,e[45]=j):j=e[45];const Z=!me||se;let O;e[46]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(Pe,{className:"mr-1 h-4 w-4"}),e[46]=O):O=e[46];const ee=se?"Saving...":"Save Plot";let y;e[47]!==Z||e[48]!==ee?(y=t.jsxs(ne,{type:"submit",disabled:Z,className:"flex-1",children:[O,ee]}),e[47]=Z,e[48]=ee,e[49]=y):y=e[49];let N;e[50]!==j||e[51]!==y?(N=t.jsxs("div",{className:"flex gap-2",children:[j,y]}),e[50]=j,e[51]=y,e[52]=N):N=e[52];let _;e[53]!==X||e[54]!==p||e[55]!==h||e[56]!==b||e[57]!==N?(_=t.jsx("div",{className:"w-full lg:w-96 lg:shrink-0",children:t.jsxs(Ne,{children:[B,t.jsx(_e,{children:t.jsxs("form",{onSubmit:X,className:"space-y-4",children:[p,h,b,N]})})]})}),e[53]=X,e[54]=p,e[55]=h,e[56]=b,e[57]=N,e[58]=_):_=e[58];let v;e[59]!==Q||e[60]!==s||e[61]!==m||e[62]!==U||e[63]!==V||e[64]!==W||e[65]!==r||e[66]!==o?(v=m?t.jsx("div",{className:"flex h-full min-h-[400px] items-center justify-center bg-muted/50",children:t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(we,{className:"h-8 w-8 animate-spin text-muted-foreground"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Getting your location..."})]})}):t.jsxs(xe,{center:U(),zoom:19,onClick:s.length<4?V:void 0,children:[r&&o&&t.jsx(he,{position:{lat:r,lng:o},accuracy:Q}),s.map((a,i)=>t.jsx(ge,{position:a,index:i,draggable:!0,onDragEnd:W},i)),s.length>=3&&t.jsx(ue,{points:s})]}),e[59]=Q,e[60]=s,e[61]=m,e[62]=U,e[63]=V,e[64]=W,e[65]=r,e[66]=o,e[67]=v):v=e[67];let S;e[68]!==s.length||e[69]!==m?(S=!m&&s.length<4&&t.jsx("div",{className:"pointer-events-none absolute left-4 top-4 rounded-lg bg-background/90 px-3 py-2 shadow-lg",children:t.jsx("p",{className:"text-sm font-medium",children:s.length===0?"Click on the map to place the first point":`Click to place point ${s.length+1} of 4`})}),e[68]=s.length,e[69]=m,e[70]=S):S=e[70];let C;e[71]!==v||e[72]!==S?(C=t.jsxs("div",{className:"relative min-h-[400px] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:[v,S]}),e[71]=v,e[72]=S,e[73]=C):C=e[73];let T;return e[74]!==_||e[75]!==C?(T=t.jsxs(Ce,{breadcrumbs:Ge,children:[F,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4 lg:flex-row",children:[_,C]})]}),e[74]=_,e[75]=C,e[76]=T):T=e[76],T}function Le(e,l){return t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-blue-600 text-white",children:l+1}),t.jsxs("span",{className:"font-mono",children:[e.lat.toFixed(6),", ",e.lng.toFixed(6)]})]},l)}export{Ue as default};
