import{c as be,r as B,j as t,a as ge,H as je,L as ye}from"./app-DaSBwjd3.js";import{P as _e,M as Se}from"./PlotPolygon-Z-WuaU9z.js";import{P as ve}from"./PlotMarker-DodMKZk9.js";import{B as me}from"./app-logo-icon-CiuGZB-X.js";import{C as Ne,a as Ce,b as Pe,c as we,d as Ee}from"./card-CWe1S6TP.js";import{I as fe}from"./input-Bm7_Kin8.js";import{L as oe}from"./label-Dm7C1Wil.js";import{A as ke}from"./app-layout-C2qF2AQb.js";import{A as De}from"./arrow-left-DoYDirFS.js";import{S as Le}from"./save-e4WrKEvD.js";/* empty css            */import"./index-MogoZHjD.js";import"./index-uAKuWc2X.js";import"./index-C4J_hXM0.js";function Ve(n){const e=be.c(88),{plot:r}=n;let F,M;e[0]===Symbol.for("react.memo_cache_sentinel")?(F={title:"Dashboard",href:"/dashboard"},M={title:"Land Plots",href:"/land-plots"},e[0]=F,e[1]=M):(F=e[0],M=e[1]);const Y=`/land-plots/${r.id}`;let c;e[2]!==r.name||e[3]!==Y?(c={title:r.name,href:Y},e[2]=r.name,e[3]=Y,e[4]=c):c=e[4];const Z=`/land-plots/${r.id}/edit`;let d;e[5]!==Z?(d={title:"Edit",href:Z},e[5]=Z,e[6]=d):d=e[6];let A;e[7]!==c||e[8]!==d?(A=[F,M,c,d],e[7]=c,e[8]=d,e[9]=A):A=e[9];const ee=A,[a,pe]=B.useState(r.name),[m,he]=B.useState(r.description||""),[s,ue]=B.useState(r.boundary_points),[ce,te]=B.useState(!1);let H;e[10]===Symbol.for("react.memo_cache_sentinel")?(H={},e[10]=H):H=e[10];const[i,de]=B.useState(H);let I;e[11]!==s?(I=(l,o)=>{const $=[...s];$[l]=o,ue($)},e[11]=s,e[12]=I):I=e[12];const L=I;let z;e[13]!==s||e[14]!==m||e[15]!==a||e[16]!==r.id?(z=l=>{l.preventDefault(),te(!0),de({}),ge.put(`/land-plots/${r.id}`,{name:a,description:m,boundary_points:s},{onError:o=>{de(o),te(!1)},onSuccess:()=>{te(!1)}})},e[13]=s,e[14]=m,e[15]=a,e[16]=r.id,e[17]=z):z=e[17];const se=z;let R;e[18]!==s?(R=()=>{if(s.length>0){const l=s.reduce(Fe,0)/s.length,o=s.reduce(Be,0)/s.length;return[l,o]}return[-6.2088,106.8456]},e[18]=s,e[19]=R):R=e[19];const le=R;let q;e[20]!==s.length||e[21]!==a?(q=a.trim()!==""&&s.length===4,e[20]=s.length,e[21]=a,e[22]=q):q=e[22];const xe=q,re=`Edit ${r.name}`;let f;e[23]!==re?(f=t.jsx(je,{title:re}),e[23]=re,e[24]=f):f=e[24];const ae=`/land-plots/${r.id}`;let O;e[25]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsxs(me,{variant:"ghost",size:"sm",children:[t.jsx(De,{className:"mr-1 h-4 w-4"}),"Back to Plot"]}),e[25]=O):O=e[25];let p;e[26]!==ae?(p=t.jsx(ye,{href:ae,children:O}),e[26]=ae,e[27]=p):p=e[27];let T;e[28]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsxs(Ne,{children:[t.jsx(Ce,{children:"Edit Plot"}),t.jsx(Pe,{children:"Drag the markers on the map to adjust boundary points."})]}),e[28]=T):T=e[28];let G;e[29]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(oe,{htmlFor:"name",children:"Plot Name *"}),e[29]=G):G=e[29];let J;e[30]===Symbol.for("react.memo_cache_sentinel")?(J=l=>pe(l.target.value),e[30]=J):J=e[30];let h;e[31]!==a?(h=t.jsx(fe,{id:"name",value:a,onChange:J,placeholder:"e.g., North Field",required:!0}),e[31]=a,e[32]=h):h=e[32];let u;e[33]!==i.name?(u=i.name&&t.jsx("p",{className:"text-sm text-destructive",children:i.name}),e[33]=i.name,e[34]=u):u=e[34];let x;e[35]!==h||e[36]!==u?(x=t.jsxs("div",{className:"space-y-2",children:[G,h,u]}),e[35]=h,e[36]=u,e[37]=x):x=e[37];let K;e[38]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(oe,{htmlFor:"description",children:"Description"}),e[38]=K):K=e[38];let Q;e[39]===Symbol.for("react.memo_cache_sentinel")?(Q=l=>he(l.target.value),e[39]=Q):Q=e[39];let b;e[40]!==m?(b=t.jsxs("div",{className:"space-y-2",children:[K,t.jsx(fe,{id:"description",value:m,onChange:Q,placeholder:"Optional description"})]}),e[40]=m,e[41]=b):b=e[41];let U;e[42]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(oe,{children:"Boundary Points"}),e[42]=U):U=e[42];let g;e[43]!==s?(g=s.map($e),e[43]=s,e[44]=g):g=e[44];let j;e[45]!==g?(j=t.jsx("div",{className:"rounded-lg border bg-muted/50 p-3",children:t.jsx("div",{className:"space-y-2",children:g})}),e[45]=g,e[46]=j):j=e[46];let y;e[47]!==i.boundary_points?(y=i.boundary_points&&t.jsx("p",{className:"text-sm text-destructive",children:i.boundary_points}),e[47]=i.boundary_points,e[48]=y):y=e[48];let _;e[49]!==j||e[50]!==y?(_=t.jsxs("div",{className:"space-y-2",children:[U,j,y]}),e[49]=j,e[50]=y,e[51]=_):_=e[51];const ne=!xe||ce;let V;e[52]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx(Le,{className:"mr-1 h-4 w-4"}),e[52]=V):V=e[52];const ie=ce?"Saving...":"Save Changes";let S;e[53]!==ne||e[54]!==ie?(S=t.jsxs(me,{type:"submit",disabled:ne,className:"w-full",children:[V,ie]}),e[53]=ne,e[54]=ie,e[55]=S):S=e[55];let v;e[56]!==se||e[57]!==x||e[58]!==b||e[59]!==_||e[60]!==S?(v=t.jsxs(we,{children:[T,t.jsx(Ee,{children:t.jsxs("form",{onSubmit:se,className:"space-y-4",children:[x,b,_,S]})})]}),e[56]=se,e[57]=x,e[58]=b,e[59]=_,e[60]=S,e[61]=v):v=e[61];let N;e[62]!==p||e[63]!==v?(N=t.jsxs("div",{className:"w-full space-y-4 lg:w-96 lg:shrink-0",children:[p,v]}),e[62]=p,e[63]=v,e[64]=N):N=e[64];let C;e[65]!==le?(C=le(),e[65]=le,e[66]=C):C=e[66];let P;e[67]!==s?(P=t.jsx(_e,{points:s,isSelected:!0}),e[67]=s,e[68]=P):P=e[68];let w;if(e[69]!==s||e[70]!==L){let l;e[72]!==L?(l=(o,$)=>t.jsx(ve,{position:o,index:$,draggable:!0,onDragEnd:L},$),e[72]=L,e[73]=l):l=e[73],w=s.map(l),e[69]=s,e[70]=L,e[71]=w}else w=e[71];let E;e[74]!==C||e[75]!==P||e[76]!==w?(E=t.jsxs(Se,{center:C,zoom:19,children:[P,w]}),e[74]=C,e[75]=P,e[76]=w,e[77]=E):E=e[77];let W;e[78]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("div",{className:"pointer-events-none absolute left-4 top-4 rounded-lg bg-background/90 px-3 py-2 shadow-lg",children:t.jsx("p",{className:"text-sm font-medium",children:"Drag markers to adjust boundary positions"})}),e[78]=W):W=e[78];let k;e[79]!==E?(k=t.jsxs("div",{className:"relative min-h-[400px] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:[E,W]}),e[79]=E,e[80]=k):k=e[80];let D;e[81]!==N||e[82]!==k?(D=t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4 lg:flex-row",children:[N,k]}),e[81]=N,e[82]=k,e[83]=D):D=e[83];let X;return e[84]!==ee||e[85]!==f||e[86]!==D?(X=t.jsxs(ke,{breadcrumbs:ee,children:[f,D]}),e[84]=ee,e[85]=f,e[86]=D,e[87]=X):X=e[87],X}function $e(n,e){return t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-blue-600 text-white",children:e+1}),t.jsxs("span",{className:"font-mono",children:[n.lat.toFixed(6),", ",n.lng.toFixed(6)]})]},e)}function Be(n,e){return n+e.lng}function Fe(n,e){return n+e.lat}export{Ve as default};
