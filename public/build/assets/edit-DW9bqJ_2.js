import{c as be,r as $,j as t,a as ge,H as je,L as _e}from"./app-BGs8KnOd.js";import{a as ye,G as Se}from"./GPlotPolygon-Wjzcxus_.js";import{G as ve}from"./GPlotMarker-BljB2GBO.js";import{B as de}from"./app-logo-icon-CGJadpd1.js";import{C as Ne,a as Ce,b as we,c as Ee,d as Pe}from"./card-CMNazbbV.js";import{I as fe}from"./input-L4eHozfc.js";import{L as oe}from"./label-tBGu8Mf6.js";import{A as ke}from"./app-layout-B9gkIBlP.js";import{A as De}from"./arrow-left-38Hbg9yh.js";import{S as Le}from"./save-BnHRQgTV.js";/* empty css            */import"./index-Bq155XsE.js";import"./index-BanoU4Tc.js";import"./index-C4J_hXM0.js";function Ve(n){const e=be.c(88),{plot:a}=n;let B,A;e[0]===Symbol.for("react.memo_cache_sentinel")?(B={title:"Dashboard",href:"/dashboard"},A={title:"Land Plots Gmap",href:"/land-plots-gmap"},e[0]=B,e[1]=A):(B=e[0],A=e[1]);const Y=`/land-plots-gmap/${a.id}`;let c;e[2]!==a.name||e[3]!==Y?(c={title:a.name,href:Y},e[2]=a.name,e[3]=Y,e[4]=c):c=e[4];const Z=`/land-plots-gmap/${a.id}/edit`;let m;e[5]!==Z?(m={title:"Edit",href:Z},e[5]=Z,e[6]=m):m=e[6];let F;e[7]!==c||e[8]!==m?(F=[B,A,c,m],e[7]=c,e[8]=m,e[9]=F):F=e[9];const ee=F,[r,pe]=$.useState(a.name),[d,ue]=$.useState(a.description||""),[s,he]=$.useState(a.boundary_points),[ce,te]=$.useState(!1);let M;e[10]===Symbol.for("react.memo_cache_sentinel")?(M={},e[10]=M):M=e[10];const[i,me]=$.useState(M);let H;e[11]!==s?(H=()=>{if(s.length>0){const l=s.reduce(Be,0)/s.length,o=s.reduce($e,0)/s.length;return{lat:l,lng:o}}return{lat:-6.2088,lng:106.8456}},e[11]=s,e[12]=H):H=e[12];const se=H;let I;e[13]!==s?(I=(l,o)=>{const G=[...s];G[l]=o,he(G)},e[13]=s,e[14]=I):I=e[14];const L=I;let z;e[15]!==s||e[16]!==d||e[17]!==r||e[18]!==a.id?(z=l=>{l.preventDefault(),te(!0),me({}),ge.put(`/land-plots/${a.id}`,{name:r,description:d,boundary_points:s},{onError:o=>{me(o),te(!1)},onSuccess:()=>te(!1)})},e[15]=s,e[16]=d,e[17]=r,e[18]=a.id,e[19]=z):z=e[19];const le=z;let R;e[20]!==s.length||e[21]!==r?(R=r.trim()!==""&&s.length===4,e[20]=s.length,e[21]=r,e[22]=R):R=e[22];const xe=R,ae=`Edit ${a.name}`;let f;e[23]!==ae?(f=t.jsx(je,{title:ae}),e[23]=ae,e[24]=f):f=e[24];const re=`/land-plots-gmap/${a.id}`;let q;e[25]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsxs(de,{variant:"ghost",size:"sm",children:[t.jsx(De,{className:"mr-1 h-4 w-4"}),"Back to Plot"]}),e[25]=q):q=e[25];let p;e[26]!==re?(p=t.jsx(_e,{href:re,children:q}),e[26]=re,e[27]=p):p=e[27];let T;e[28]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsxs(Ne,{children:[t.jsx(Ce,{children:"Edit Plot"}),t.jsx(we,{children:"Drag markers to adjust boundaries."})]}),e[28]=T):T=e[28];let J;e[29]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(oe,{htmlFor:"name",children:"Plot Name *"}),e[29]=J):J=e[29];let K;e[30]===Symbol.for("react.memo_cache_sentinel")?(K=l=>pe(l.target.value),e[30]=K):K=e[30];let u;e[31]!==r?(u=t.jsx(fe,{id:"name",value:r,onChange:K,required:!0}),e[31]=r,e[32]=u):u=e[32];let h;e[33]!==i.name?(h=i.name&&t.jsx("p",{className:"text-sm text-destructive",children:i.name}),e[33]=i.name,e[34]=h):h=e[34];let x;e[35]!==u||e[36]!==h?(x=t.jsxs("div",{className:"space-y-2",children:[J,u,h]}),e[35]=u,e[36]=h,e[37]=x):x=e[37];let O;e[38]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(oe,{htmlFor:"description",children:"Description"}),e[38]=O):O=e[38];let Q;e[39]===Symbol.for("react.memo_cache_sentinel")?(Q=l=>ue(l.target.value),e[39]=Q):Q=e[39];let b;e[40]!==d?(b=t.jsxs("div",{className:"space-y-2",children:[O,t.jsx(fe,{id:"description",value:d,onChange:Q})]}),e[40]=d,e[41]=b):b=e[41];let U;e[42]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(oe,{children:"Boundary Points"}),e[42]=U):U=e[42];let g;e[43]!==s?(g=s.map(Ge),e[43]=s,e[44]=g):g=e[44];let j;e[45]!==g?(j=t.jsx("div",{className:"rounded-lg border bg-muted/50 p-3 space-y-2",children:g}),e[45]=g,e[46]=j):j=e[46];let _;e[47]!==i.boundary_points?(_=i.boundary_points&&t.jsx("p",{className:"text-sm text-destructive",children:i.boundary_points}),e[47]=i.boundary_points,e[48]=_):_=e[48];let y;e[49]!==j||e[50]!==_?(y=t.jsxs("div",{className:"space-y-2",children:[U,j,_]}),e[49]=j,e[50]=_,e[51]=y):y=e[51];const ne=!xe||ce;let V;e[52]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx(Le,{className:"mr-1 h-4 w-4"}),e[52]=V):V=e[52];const ie=ce?"Saving...":"Save Changes";let S;e[53]!==ne||e[54]!==ie?(S=t.jsxs(de,{type:"submit",disabled:ne,className:"w-full",children:[V,ie]}),e[53]=ne,e[54]=ie,e[55]=S):S=e[55];let v;e[56]!==le||e[57]!==x||e[58]!==b||e[59]!==y||e[60]!==S?(v=t.jsxs(Ee,{children:[T,t.jsx(Pe,{children:t.jsxs("form",{onSubmit:le,className:"space-y-4",children:[x,b,y,S]})})]}),e[56]=le,e[57]=x,e[58]=b,e[59]=y,e[60]=S,e[61]=v):v=e[61];let N;e[62]!==p||e[63]!==v?(N=t.jsxs("div",{className:"w-full space-y-4 lg:w-96 lg:shrink-0",children:[p,v]}),e[62]=p,e[63]=v,e[64]=N):N=e[64];let C;e[65]!==se?(C=se(),e[65]=se,e[66]=C):C=e[66];let w;e[67]!==s?(w=t.jsx(ye,{points:s,isSelected:!0}),e[67]=s,e[68]=w):w=e[68];let E;if(e[69]!==s||e[70]!==L){let l;e[72]!==L?(l=(o,G)=>t.jsx(ve,{position:o,index:G,draggable:!0,onDragEnd:L},G),e[72]=L,e[73]=l):l=e[73],E=s.map(l),e[69]=s,e[70]=L,e[71]=E}else E=e[71];let P;e[74]!==C||e[75]!==w||e[76]!==E?(P=t.jsxs(Se,{center:C,zoom:19,children:[w,E]}),e[74]=C,e[75]=w,e[76]=E,e[77]=P):P=e[77];let W;e[78]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("div",{className:"pointer-events-none absolute left-4 top-4 rounded-lg bg-background/90 px-3 py-2 shadow-lg",children:t.jsx("p",{className:"text-sm font-medium",children:"Drag markers to adjust boundaries"})}),e[78]=W):W=e[78];let k;e[79]!==P?(k=t.jsxs("div",{className:"relative min-h-[400px] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:[P,W]}),e[79]=P,e[80]=k):k=e[80];let D;e[81]!==N||e[82]!==k?(D=t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4 lg:flex-row",children:[N,k]}),e[81]=N,e[82]=k,e[83]=D):D=e[83];let X;return e[84]!==ee||e[85]!==f||e[86]!==D?(X=t.jsxs(ke,{breadcrumbs:ee,children:[f,D]}),e[84]=ee,e[85]=f,e[86]=D,e[87]=X):X=e[87],X}function Ge(n,e){return t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-blue-600 text-white",children:e+1}),t.jsxs("span",{className:"font-mono",children:[n.lat.toFixed(6),", ",n.lng.toFixed(6)]})]},e)}function $e(n,e){return n+e.lng}function Be(n,e){return n+e.lat}export{Ve as default};
